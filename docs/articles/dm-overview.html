<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to dm • dm</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to dm">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dm</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.0.0.9012</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/dm.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dm-overview.html">Introduction to dm</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to dm</h1>
            
            <h4 class="date">2019-06-26</h4>
      
      
      <div class="hidden name"><code>dm-overview.Rmd</code></div>

    </div>

    
    
<p>The goal of both the package dm and the class <code>dm</code> - which comes along with it - is to make your life easier when you have to deal with data models the data therein.</p>
<p>Let’s first have a look at the new class:</p>
<div id="class-dm" class="section level2">
<h2 class="hasAnchor">
<a href="#class-dm" class="anchor"></a>Class <code>dm</code>
</h2>
<p>The <code>dm</code> class contains a set of tables as well as information about their primary keys and the relations between the tables. You can have your <code>dm</code> object on different data sources, such as a local environment or a database. In the latter use case you need to have the package dbplyr installed.</p>
<p><code>dm</code> is a wrapper around two classes, which are independent from each other:</p>
<ol style="list-style-type: decimal">
<li>part of the object is a <a href="https://dplyr.tidyverse.org/reference/src.html"><code>src</code>-object</a> from dplyr</li>
<li>the other part is a class <code>data_model</code> object from the package <a href="https://github.com/bergant/datamodelr">datamodelr</a><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
</li>
</ol>
<p>The <code>src</code>-object contains the information, where the tables of your data model live. And in the <code>data_model</code> object the meta-information is stored:</p>
<ul>
<li>what are the primary keys in your schema?</li>
<li>how are the tables related to each other, i.e. what are the foreign key relations?</li>
</ul>
<p>Last but not least, a third part of the object is a named list containing the tables on the <code>src</code>.</p>
<p>So much to the theory, let’s see how to construct such an object and how it looks in <code>R</code>:</p>
</div>
<div id="ex_dm" class="section level2">
<h2 class="hasAnchor">
<a href="#ex_dm" class="anchor"></a>Examples of <code>dm</code> objects</h2>
<p>Relevant functions for creating <code>dm</code> objects are:</p>
<ol style="list-style-type: decimal">
<li><code><a href="../reference/dm.html">dm()</a></code></li>
<li><code><a href="../reference/dm.html">as_dm()</a></code></li>
</ol>
<p>We can use the tables from the famous package {nycflights13}:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dm)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">flights_dm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dm.html">dm</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/src_local.html">src_df</a></span>(<span class="dt">pkg =</span> <span class="st">"nycflights13"</span>))</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">flights_dm</a></code></pre></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #00BB00;">──</span><span> </span><span style="color: #00BB00;">Table source</span><span> </span><span style="color: #00BB00;">───────────────────────────────────────────────────────────</span><span>
#&gt; src:  &lt;package: nycflights13&gt;
#&gt; </span><span style="color: #555555;">──</span><span> </span><span style="color: #555555;">Data model</span><span> </span><span style="color: #555555;">─────────────────────────────────────────────────────────────</span><span>
#&gt; Data model object:
#&gt;   5 tables:  airlines, airports, flights, planes ... 
#&gt;   53 columns
#&gt;   0 primary keys
#&gt;   no references
#&gt; </span><span style="color: #BBBB00;">──</span><span> </span><span style="color: #BBBB00;">Rows</span><span> </span><span style="color: #BBBB00;">───────────────────────────────────────────────────────────────────</span><span>
#&gt; Total: 367687
#&gt; airlines: 16, airports: 1458, flights: 336776, planes: 3322, weather: 26115
</span></code></pre>
<p>Here we make use of the fact, that the function <code><a href="../reference/dm.html">dm(src, data_model = NULL)</a></code> includes all available tables on a source in the <code>dm</code> object, should the <code>data_model</code>-argument be left <code>NULL</code>. Thus you can use this for example on a postgres database that you access via <code><a href="https://dplyr.tidyverse.org/reference/src_dbi.html">src_postgres()</a></code> (with the appropriate arguments <code>dbname</code>, <code>host</code>, <code>port</code>, …), to produce a <code>dm</code> object with all the tables on the database.</p>
<p>Another way of creating a <code>dm</code> object is calling <code><a href="../reference/dm.html">as_dm()</a></code> on a list of <code>tbls</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">iris_dm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dm.html">as_dm</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="st">"iris1"</span> =<span class="st"> </span>iris, <span class="st">"iris2"</span> =<span class="st"> </span>iris))</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">iris_dm</a></code></pre></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #00BB00;">──</span><span> </span><span style="color: #00BB00;">Table source</span><span> </span><span style="color: #00BB00;">───────────────────────────────────────────────────────────</span><span>
#&gt; src:  &lt;environment: 0x55f28bf6b398&gt;
#&gt; </span><span style="color: #555555;">──</span><span> </span><span style="color: #555555;">Data model</span><span> </span><span style="color: #555555;">─────────────────────────────────────────────────────────────</span><span>
#&gt; Data model object:
#&gt;   2 tables:  iris1, iris2 
#&gt;   10 columns
#&gt;   0 primary keys
#&gt;   no references
#&gt; </span><span style="color: #BBBB00;">──</span><span> </span><span style="color: #BBBB00;">Rows</span><span> </span><span style="color: #BBBB00;">───────────────────────────────────────────────────────────────────</span><span>
#&gt; Total: 300
#&gt; iris1: 150, iris2: 150
</span></code></pre>
</div>
<div id="methods-for-dm-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#methods-for-dm-objects" class="anchor"></a>Methods for <code>dm</code> objects</h2>
<p>tbl(dm, “table_name”) etc. (copy_to…) FIXME: complete</p>
<p>But how can we use dm-functions to manage primary keys of the tables in a <code>dm</code> object?</p>
</div>
<div id="pk" class="section level2">
<h2 class="hasAnchor">
<a href="#pk" class="anchor"></a>Primary keys of <code>dm</code> objects</h2>
<p>Useful functions for managing primary key settings are:</p>
<ol style="list-style-type: decimal">
<li><code><a href="../reference/cdm_add_pk.html">cdm_add_pk()</a></code></li>
<li><code><a href="../reference/cdm_has_pk.html">cdm_has_pk()</a></code></li>
<li><code><a href="../reference/cdm_get_pk.html">cdm_get_pk()</a></code></li>
<li><code><a href="../reference/cdm_rm_pk.html">cdm_rm_pk()</a></code></li>
<li><code><a href="../reference/cdm_check_for_pk_candidates.html">cdm_check_for_pk_candidates()</a></code></li>
</ol>
<p>As of yet <code>dm</code> objects only support one-column primary keys. If your tables have unique compound keys, maybe consider adding a surrogate key column. If you created a <code>dm</code> object according to the examples in <a href="#ex_dm">“Examples of <code>dm</code> objects”</a>, your object does not yet have any primary keys set. So let’s add one. By default <code><a href="../reference/cdm_add_pk.html">cdm_add_pk()</a></code> checks if the column of the table given by the user is a unique key. Since the <code>iris</code> dataset does not have any unique one-column keys, we will use the <code>nycflights13</code> tables, i.e. <code>flights_dm</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../reference/cdm_has_pk.html">cdm_has_pk</a></span>(flights_dm, airports)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">flights_dm_with_key &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cdm_add_pk.html">cdm_add_pk</a></span>(flights_dm, airports, faa)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">flights_dm_with_key</a></code></pre></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #00BB00;">──</span><span> </span><span style="color: #00BB00;">Table source</span><span> </span><span style="color: #00BB00;">───────────────────────────────────────────────────────────</span><span>
#&gt; src:  &lt;package: nycflights13&gt;
#&gt; </span><span style="color: #555555;">──</span><span> </span><span style="color: #555555;">Data model</span><span> </span><span style="color: #555555;">─────────────────────────────────────────────────────────────</span><span>
#&gt; Data model object:
#&gt;   5 tables:  airlines, airports, flights, planes ... 
#&gt;   53 columns
#&gt;   1 primary keys
#&gt;   no references
#&gt; </span><span style="color: #BBBB00;">──</span><span> </span><span style="color: #BBBB00;">Rows</span><span> </span><span style="color: #BBBB00;">───────────────────────────────────────────────────────────────────</span><span>
#&gt; Total: 367687
#&gt; airlines: 16, airports: 1458, flights: 336776, planes: 3322, weather: 26115
</span></code></pre>
<p>Still looks exactly the same as before… let’s check:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/cdm_has_pk.html">cdm_has_pk</a></span>(flights_dm_with_key, airports)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<p>Get the name of the column that is marked as primary key of the table:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/cdm_get_pk.html">cdm_get_pk</a></span>(flights_dm_with_key, airports)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt; [1] "faa"</span></a></code></pre></div>
<p>Remove a primary key by:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="../reference/cdm_rm_pk.html">cdm_rm_pk</a></span>(flights_dm_with_key, airports) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/cdm_has_pk.html">cdm_has_pk</a></span>(airports)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; [1] FALSE</span></a></code></pre></div>
<p>If you still need to get to know your data better, and it is already available in the form of a <code>dm</code> object, you can use the function <code><a href="../reference/cdm_check_for_pk_candidates.html">cdm_check_for_pk_candidates()</a></code> in order to get information, which columns of a table are unique keys:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="../reference/cdm_check_for_pk_candidates.html">cdm_check_for_pk_candidates</a></span>(flights_dm_with_key, airports)</a></code></pre></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #555555;"># A tibble: 8 x 2</span><span>
#&gt;   candidate column
#&gt;   </span><span style="color: #555555;font-style: italic;">&lt;lgl&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span> 
#&gt; </span><span style="color: #555555;">1</span><span> TRUE      faa   
#&gt; </span><span style="color: #555555;">2</span><span> FALSE     name  
#&gt; </span><span style="color: #555555;">3</span><span> FALSE     lat   
#&gt; </span><span style="color: #555555;">4</span><span> TRUE      lon   
#&gt; </span><span style="color: #555555;">5</span><span> FALSE     alt   
#&gt; </span><span style="color: #555555;">6</span><span> FALSE     tz    
#&gt; </span><span style="color: #555555;">7</span><span> FALSE     dst   
#&gt; </span><span style="color: #555555;">8</span><span> FALSE     tzone
</span></code></pre>
<p>Table <code>flights</code> does not have any one-column primary key candidates:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="../reference/cdm_check_for_pk_candidates.html">cdm_check_for_pk_candidates</a></span>(flights_dm_with_key, flights) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(candidate)</a></code></pre></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #555555;"># A tibble: 1 x 2</span><span>
#&gt;   candidate     n
#&gt;   </span><span style="color: #555555;font-style: italic;">&lt;lgl&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;int&gt;</span><span>
#&gt; </span><span style="color: #555555;">1</span><span> FALSE        19
</span></code></pre>
</div>
<div id="foreign-keys" class="section level2">
<h2 class="hasAnchor">
<a href="#foreign-keys" class="anchor"></a>Foreign keys</h2>
<p>Useful functions for managing foreign key relations are:</p>
<ol style="list-style-type: decimal">
<li><code><a href="../reference/cdm_add_fk.html">cdm_add_fk()</a></code></li>
<li><code><a href="../reference/cdm_has_fk.html">cdm_has_fk()</a></code></li>
<li><code><a href="../reference/cdm_get_fk.html">cdm_get_fk()</a></code></li>
<li><code><a href="../reference/cdm_rm_fk.html">cdm_rm_fk()</a></code></li>
<li><code><a href="../reference/cdm_check_for_fk_candidates.html">cdm_check_for_fk_candidates()</a></code></li>
</ol>
<p>Now it gets (even more) interesting: we want to define relations between different tables. With the function <code><a href="../reference/cdm_add_fk.html">cdm_add_fk()</a></code> you can define, which column of which table points to another table’s column.</p>
<p>When dealing with data models, a foreign key from one table has to always point to a primary key of another table. The primary key of the referred table must be set with <code><a href="../reference/cdm_add_pk.html">cdm_add_pk()</a></code>. <code><a href="../reference/cdm_add_fk.html">cdm_add_fk()</a></code> will find the primary key column of the referenced table by itself and make the indicated column of the child table point to it.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">flights_dm_with_key <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/cdm_add_fk.html">cdm_add_fk</a></span>(flights, origin, airports)</a></code></pre></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #00BB00;">──</span><span> </span><span style="color: #00BB00;">Table source</span><span> </span><span style="color: #00BB00;">───────────────────────────────────────────────────────────</span><span>
#&gt; src:  &lt;package: nycflights13&gt;
#&gt; </span><span style="color: #555555;">──</span><span> </span><span style="color: #555555;">Data model</span><span> </span><span style="color: #555555;">─────────────────────────────────────────────────────────────</span><span>
#&gt; Data model object:
#&gt;   5 tables:  airlines, airports, flights, planes ... 
#&gt;   53 columns
#&gt;   1 primary keys
#&gt;   1 references
#&gt; </span><span style="color: #BBBB00;">──</span><span> </span><span style="color: #BBBB00;">Rows</span><span> </span><span style="color: #BBBB00;">───────────────────────────────────────────────────────────────────</span><span>
#&gt; Total: 367687
#&gt; airlines: 16, airports: 1458, flights: 336776, planes: 3322, weather: 26115
</span></code></pre>
<p>This will throw an error:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">flights_dm <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/cdm_add_fk.html">cdm_add_fk</a></span>(flights, origin, airports)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt; ref_table 'airports' needs a primary key first. Candidates are: 'faa, lon'.</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt; Use 'cdm_add_pk()' to set it.</span></a></code></pre></div>
<p>Let’s create a <code>dm</code> object with a foreign key relation to work with later on:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">flights_dm_with_fk &lt;-<span class="st"> </span><span class="kw"><a href="../reference/cdm_add_fk.html">cdm_add_fk</a></span>(flights_dm_with_key, flights, origin, airports)</a></code></pre></div>
<p>What if we try to add another foreign key relation from <code>flights</code> to <code>airports</code> to the object? Column <code>dest</code> might work, since it also contains airport codes:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">flights_dm_with_fk <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/cdm_add_fk.html">cdm_add_fk</a></span>(flights, dest, airports)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt; Column `dest` in table `flights` contains values (see above) that are not</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; present in column `faa` in table `airports`</span></a></code></pre></div>
<p>As you can see, behind the scenes, checks are executed automatically by the functions of <code>dm</code> to prevent steps that do not comply with the logic of data models.</p>
<p>Use <code><a href="../reference/cdm_has_fk.html">cdm_has_fk()</a></code> for checking if a foreign key exists, which is pointing from one table to another:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">flights_dm_with_fk <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/cdm_has_fk.html">cdm_has_fk</a></span>(flights, planes)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3">flights_dm_with_fk <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/cdm_has_fk.html">cdm_has_fk</a></span>(flights, airports)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<p>If you want to access the name of the column, which acts as a foreign key of one table to another table’s column, use <code><a href="../reference/cdm_get_fk.html">cdm_get_fk()</a></code>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">flights_dm_with_fk <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/cdm_get_fk.html">cdm_get_fk</a></span>(flights, planes)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">#&gt; character(0)</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3">flights_dm_with_fk <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/cdm_get_fk.html">cdm_get_fk</a></span>(flights, airports)</a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt; [1] "origin"</span></a></code></pre></div>
<p>Remove foreign key relations with <code><a href="../reference/cdm_rm_fk.html">cdm_rm_fk()</a></code> (parameter <code>column = NULL</code> means removal of all relations):</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">flights_dm_with_fk <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/cdm_rm_fk.html">cdm_rm_fk</a></span>(<span class="dt">table =</span> flights, <span class="dt">column =</span> dest, <span class="dt">ref_table =</span> airports) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/cdm_get_fk.html">cdm_get_fk</a></span>(flights, airports)</a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#&gt; The given combination of columns 'dest' is not a foreign key of table</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt; 'flights' with regards to ref_table 'airports'. Foreign key columns are:</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#&gt; 'origin'.</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7">flights_dm_with_fk <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="../reference/cdm_rm_fk.html">cdm_rm_fk</a></span>(flights, origin, airports) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="../reference/cdm_get_fk.html">cdm_get_fk</a></span>(flights, airports)</a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co">#&gt; character(0)</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11">flights_dm_with_fk <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="st">  </span><span class="kw"><a href="../reference/cdm_rm_fk.html">cdm_rm_fk</a></span>(flights, <span class="ot">NULL</span>, airports) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="../reference/cdm_get_fk.html">cdm_get_fk</a></span>(flights, airports)</a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">#&gt; character(0)</span></a></code></pre></div>
<p>Another function for getting to know your data better (cf. <code><a href="../reference/cdm_check_for_pk_candidates.html">cdm_check_for_pk_candidates()</a></code> in <a href="#pk">“Primary keys of <code>dm</code> objects”</a>) is <code><a href="../reference/cdm_check_for_fk_candidates.html">cdm_check_for_fk_candidates()</a></code>. Use it to get an overview over foreign key candidates pointing from one table to another:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="../reference/cdm_check_for_fk_candidates.html">cdm_check_for_fk_candidates</a></span>(flights_dm_with_key, weather, airports)</a></code></pre></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #555555;"># A tibble: 15 x 5</span><span>
#&gt;    candidate column     table   ref_table ref_table_pk
#&gt;    </span><span style="color: #555555;font-style: italic;">&lt;lgl&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>      </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>     </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>       
#&gt; </span><span style="color: #555555;"> 1</span><span> TRUE      origin     weather airports  faa         
#&gt; </span><span style="color: #555555;"> 2</span><span> FALSE     year       weather airports  faa         
#&gt; </span><span style="color: #555555;"> 3</span><span> FALSE     month      weather airports  faa         
#&gt; </span><span style="color: #555555;"> 4</span><span> FALSE     day        weather airports  faa         
#&gt; </span><span style="color: #555555;"> 5</span><span> FALSE     hour       weather airports  faa         
#&gt; </span><span style="color: #555555;"> 6</span><span> FALSE     temp       weather airports  faa         
#&gt; </span><span style="color: #555555;"> 7</span><span> FALSE     dewp       weather airports  faa         
#&gt; </span><span style="color: #555555;"> 8</span><span> FALSE     humid      weather airports  faa         
#&gt; </span><span style="color: #555555;"> 9</span><span> FALSE     wind_dir   weather airports  faa         
#&gt; </span><span style="color: #555555;">10</span><span> FALSE     wind_speed weather airports  faa         
#&gt; </span><span style="color: #555555;">11</span><span> FALSE     wind_gust  weather airports  faa         
#&gt; </span><span style="color: #555555;">12</span><span> FALSE     precip     weather airports  faa         
#&gt; </span><span style="color: #555555;">13</span><span> FALSE     pressure   weather airports  faa         
#&gt; </span><span style="color: #555555;">14</span><span> FALSE     visib      weather airports  faa         
#&gt; </span><span style="color: #555555;">15</span><span> FALSE     time_hour  weather airports  faa
</span></code></pre>
</div>
<div id="visualising-the-data-model" class="section level2">
<h2 class="hasAnchor">
<a href="#visualising-the-data-model" class="anchor"></a>Visualising the data model</h2>
<p>Relevant functions for visualising the data model:<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<ol style="list-style-type: decimal">
<li><code><a href="../reference/cdm_draw.html">cdm_set_colors()</a></code></li>
<li><code><a href="../reference/cdm_draw.html">cdm_get_colors()</a></code></li>
<li><code><a href="../reference/cdm_draw.html">cdm_get_available_colors()</a></code></li>
<li><code><a href="../reference/cdm_draw.html">cdm_draw()</a></code></li>
</ol>
<p>Once you have all primary keys set and all foreign key relations defined, it might be interesting to look at a graphical representation of your data model.</p>
<p>Let’s first create a slightly more interconnected <code>dm</code> object from the {nycflights13} package tables:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">flights_dm_w_many_keys &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="st">  </span>flights_dm <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/cdm_add_pk.html">cdm_add_pk</a></span>(planes, tailnum) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/cdm_add_pk.html">cdm_add_pk</a></span>(airports, faa) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/cdm_add_pk.html">cdm_add_pk</a></span>(airlines, carrier) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="../reference/cdm_add_fk.html">cdm_add_fk</a></span>(flights, origin, airports) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="../reference/cdm_add_fk.html">cdm_add_fk</a></span>(flights, carrier, airlines) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="../reference/cdm_add_fk.html">cdm_add_fk</a></span>(flights, tailnum, planes, <span class="dt">check =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="st">  </span><span class="kw"><a href="../reference/cdm_add_fk.html">cdm_add_fk</a></span>(flights, dest, airports, <span class="dt">check =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">flights_dm_w_many_keys</a></code></pre></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #00BB00;">──</span><span> </span><span style="color: #00BB00;">Table source</span><span> </span><span style="color: #00BB00;">───────────────────────────────────────────────────────────</span><span>
#&gt; src:  &lt;package: nycflights13&gt;
#&gt; </span><span style="color: #555555;">──</span><span> </span><span style="color: #555555;">Data model</span><span> </span><span style="color: #555555;">─────────────────────────────────────────────────────────────</span><span>
#&gt; Data model object:
#&gt;   5 tables:  airlines, airports, flights, planes ... 
#&gt;   53 columns
#&gt;   3 primary keys
#&gt;   4 references
#&gt; </span><span style="color: #BBBB00;">──</span><span> </span><span style="color: #BBBB00;">Rows</span><span> </span><span style="color: #BBBB00;">───────────────────────────────────────────────────────────────────</span><span>
#&gt; Total: 367687
#&gt; airlines: 16, airports: 1458, flights: 336776, planes: 3322, weather: 26115
</span></code></pre>
<p>You probably realized the option <code>check = FALSE</code> in the last two function calls when adding foreign keys. The check normally ensures, that the set of values of the column of the first table is a subset of the set of values of the primary key column of the referenced table. Since in our case this isn’t the case, but we want complexity, we turned the check off. It is recommended not to do this, since you might run into errors or other unwanted effects, mainly when working on databases.</p>
<p>You can use colors to visually group your tables into families (which could reflect their logical grouping). Currently, there are only eight different colors available (plus the option of having borders displayed around the tables or not). To find out which colors exist, use <code><a href="../reference/cdm_draw.html">cdm_get_available_colors()</a></code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="../reference/cdm_draw.html">cdm_get_available_colors</a></span>()</a></code></pre></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #555555;"># A tibble: 15 x 3</span><span>
#&gt;    dm            datamodelr nb         
#&gt;    </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>         </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>      </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>      
#&gt; </span><span style="color: #555555;"> 1</span><span> default       default    (border)   
#&gt; </span><span style="color: #555555;"> 2</span><span> blue_nb       accent1nb  (no border)
#&gt; </span><span style="color: #555555;"> 3</span><span> orange_nb     accent2nb  (no border)
#&gt; </span><span style="color: #555555;"> 4</span><span> yellow_nb     accent3nb  (no border)
#&gt; </span><span style="color: #555555;"> 5</span><span> green_nb      accent4nb  (no border)
#&gt; </span><span style="color: #555555;"> 6</span><span> dark_blue_nb  accent5nb  (no border)
#&gt; </span><span style="color: #555555;"> 7</span><span> light_grey_nb accent6nb  (no border)
#&gt; </span><span style="color: #555555;"> 8</span><span> grey_nb       accent7nb  (no border)
#&gt; </span><span style="color: #555555;"> 9</span><span> blue          accent1    (border)   
#&gt; </span><span style="color: #555555;">10</span><span> orange        accent2    (border)   
#&gt; </span><span style="color: #555555;">11</span><span> yellow        accent3    (border)   
#&gt; </span><span style="color: #555555;">12</span><span> green         accent4    (border)   
#&gt; </span><span style="color: #555555;">13</span><span> dark_blue     accent5    (border)   
#&gt; </span><span style="color: #555555;">14</span><span> light_grey    accent6    (border)   
#&gt; </span><span style="color: #555555;">15</span><span> grey          accent7    (border)
</span></code></pre>
<p>The assignment is carried out with <code><a href="../reference/cdm_draw.html">cdm_set_colors()</a></code>, using a syntax similar to <code><a href="https://www.rdocumentation.org/packages/base/topics/switch">switch()</a></code>. Any table you don’t specifically assign will be displayed in the default color.</p>
<p>Use <code><a href="../reference/cdm_draw.html">cdm_set_colors()</a></code> to assign the respective colors. The result of <code><a href="../reference/cdm_draw.html">cdm_set_colors()</a></code> is a <code>dm</code> object. The information about the color is stored in its <code>data_model</code>-part.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">flights_dm_w_many_keys_and_colors &lt;-</a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="st">  </span>flights_dm_w_many_keys <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/cdm_draw.html">cdm_set_colors</a></span>(</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">    <span class="dt">flights =</span> <span class="st">"blue"</span>,</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">    <span class="dt">airlines =</span> ,</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">    <span class="dt">airports =</span> <span class="st">"orange"</span>,</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">    <span class="dt">planes =</span> <span class="st">"green_nb"</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8">  )</a></code></pre></div>
<p>Draw the schema with <code><a href="../reference/cdm_draw.html">cdm_draw()</a></code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw"><a href="../reference/cdm_draw.html">cdm_draw</a></span>(flights_dm_w_many_keys_and_colors)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="co">#&gt; Registered S3 methods overwritten by 'ggplot2':</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="co">#&gt;   method         from </span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="co">#&gt;   [.quosures     rlang</span></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="co">#&gt;   c.quosures     rlang</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="co">#&gt;   print.quosures rlang</span></a></code></pre></div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?><!-- Generated by graphviz version 2.40.1 (20161225.0304)
 --><!-- Title: %0 Pages: 1 --><svg width="152pt" height="173pt" viewbox="0.00 0.00 152.00 173.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 169)"><title>%0</title>
<g id="a_graph0"><a xlink:title="Data Model">
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-169 148,-169 148,4 -4,4"></polygon></a>
</g><!-- airlines --><g id="node1" class="node"><title>airlines</title>
<polygon fill="#ed7d31" stroke="transparent" points="95,-139 95,-159 140,-159 140,-139 95,-139"></polygon><text text-anchor="start" x="96.8969" y="-144.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">airlines</text><polygon fill="#f9dbd2" stroke="transparent" points="95,-119 95,-139 140,-139 140,-119 95,-119"></polygon><text text-anchor="start" x="97" y="-125.4" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">carrier</text><polygon fill="none" stroke="#ae5a21" points="93.5,-118 93.5,-160 140.5,-160 140.5,-118 93.5,-118"></polygon></g><!-- airports --><g id="node2" class="node"><title>airports</title>
<polygon fill="#ed7d31" stroke="transparent" points="94,-21 94,-41 140,-41 140,-21 94,-21"></polygon><text text-anchor="start" x="95.6192" y="-26.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">airports</text><polygon fill="#f9dbd2" stroke="transparent" points="94,-1 94,-21 140,-21 140,-1 94,-1"></polygon><text text-anchor="start" x="96" y="-7.4" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">faa</text><polygon fill="none" stroke="#ae5a21" points="93,0 93,-42 141,-42 141,0 93,0"></polygon></g><!-- flights --><g id="node3" class="node"><title>flights</title>
<polygon fill="#5b9bd5" stroke="transparent" points="4,-90 4,-110 50,-110 50,-90 4,-90"></polygon><text text-anchor="start" x="9.1115" y="-95.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">flights</text><polygon fill="#d6e1f1" stroke="transparent" points="4,-70 4,-90 50,-90 50,-70 4,-70"></polygon><text text-anchor="start" x="6" y="-75.4" font-family="Times,serif" font-size="14.00" fill="#444444">carrier</text><polygon fill="#d6e1f1" stroke="transparent" points="4,-50 4,-70 50,-70 50,-50 4,-50"></polygon><text text-anchor="start" x="5.6115" y="-55.4" font-family="Times,serif" font-size="14.00" fill="#444444">tailnum</text><polygon fill="#d6e1f1" stroke="transparent" points="4,-30 4,-50 50,-50 50,-30 4,-30"></polygon><text text-anchor="start" x="6" y="-35.4" font-family="Times,serif" font-size="14.00" fill="#444444">origin</text><polygon fill="#d6e1f1" stroke="transparent" points="4,-10 4,-30 50,-30 50,-10 4,-10"></polygon><text text-anchor="start" x="6" y="-15.4" font-family="Times,serif" font-size="14.00" fill="#444444">dest</text><polygon fill="none" stroke="#41719c" points="3,-9 3,-111 51,-111 51,-9 3,-9"></polygon></g><!-- flights&#45;&gt;airlines --><g id="edge2" class="edge"><title>flights:carrier-&gt;airlines:carrier</title>
<path fill="none" stroke="#555555" d="M50,-80C75.4101,-80 68.5434,-116.1877 84.8757,-126.3655"></path><polygon fill="#555555" stroke="#555555" points="84.4409,-129.8689 95,-129 86.2037,-123.0945 84.4409,-129.8689"></polygon></g><!-- flights&#45;&gt;airports --><g id="edge1" class="edge"><title>flights:origin-&gt;airports:faa</title>
<path fill="none" stroke="#555555" d="M50,-40C69.3955,-40 70.7801,-20.1121 83.9844,-13.2756"></path><polygon fill="#555555" stroke="#555555" points="85.024,-16.6287 94,-11 83.473,-9.8026 85.024,-16.6287"></polygon></g><!-- flights&#45;&gt;airports --><g id="edge4" class="edge"><title>flights:dest-&gt;airports:faa</title>
<path fill="none" stroke="#555555" d="M50,-20C66.0619,-20 71.8403,-14.1723 83.8852,-11.8959"></path><polygon fill="#555555" stroke="#555555" points="84.3478,-15.3687 94,-11 83.7302,-8.396 84.3478,-15.3687"></polygon></g><!-- planes --><g id="node4" class="node"><title>planes</title>
<polygon fill="#70ad47" stroke="transparent" points="94,-80 94,-100 140,-100 140,-80 94,-80"></polygon><text text-anchor="start" x="99.1178" y="-85.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">planes</text><polygon fill="#d9e6d4" stroke="transparent" points="94,-60 94,-80 140,-80 140,-60 94,-60"></polygon><text text-anchor="start" x="95.6115" y="-66.4" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">tailnum</text></g><!-- flights&#45;&gt;planes --><g id="edge3" class="edge"><title>flights:tailnum-&gt;planes:tailnum</title>
<path fill="none" stroke="#555555" d="M50,-60C66.1374,-60 71.8091,-66.4752 83.8583,-69.0046"></path><polygon fill="#555555" stroke="#555555" points="83.7059,-72.5064 94,-70 84.3897,-65.5399 83.7059,-72.5064"></polygon></g><!-- weather --><g id="node5" class="node"><title>weather</title>
<polygon fill="#efebdd" stroke="transparent" points="3,-137 3,-157 51,-157 51,-137 3,-137"></polygon><text text-anchor="start" x="4.8492" y="-142.4" font-family="Times,serif" font-size="14.00" fill="#000000">weather</text><polygon fill="none" stroke="#555555" points="2,-136 2,-158 52,-158 52,-136 2,-136"></polygon></g></g></svg><p>The colors can be queried with <code><a href="../reference/cdm_draw.html">cdm_get_colors()</a></code>.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw"><a href="../reference/cdm_draw.html">cdm_get_colors</a></span>(flights_dm_w_many_keys_and_colors)</a></code></pre></div>
<pre class="fansi fansi-output"><code>#&gt; <span style="color: #555555;"># A tibble: 5 x 2</span><span>
#&gt;   table    color   
#&gt;   </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>    </span><span style="color: #555555;font-style: italic;">&lt;chr&gt;</span><span>   
#&gt; </span><span style="color: #555555;">1</span><span> airlines orange  
#&gt; </span><span style="color: #555555;">2</span><span> airports orange  
#&gt; </span><span style="color: #555555;">3</span><span> flights  blue    
#&gt; </span><span style="color: #555555;">4</span><span> planes   green_nb
#&gt; </span><span style="color: #555555;">5</span><span> weather  </span><span style="color: #BB0000;">NA</span><span>
</span></code></pre>
<p>There are quite a few options for customization available. Please read the documentation to find out more. One argument of the function we’d like to draw your attention to, though, is <code>table_names</code>. This argument accepts a character vector with the table names which are to be printed, in case you would like to only see a subset of the whole data model.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw"><a href="../reference/cdm_draw.html">cdm_draw</a></span>(flights_dm_w_many_keys_and_colors, <span class="dt">table_names =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"flights"</span>, <span class="st">"airports"</span>, <span class="st">"planes"</span>))</a></code></pre></div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?><!-- Generated by graphviz version 2.40.1 (20161225.0304)
 --><!-- Title: %0 Pages: 1 --><svg width="152pt" height="108pt" viewbox="0.00 0.00 152.00 108.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 104)"><title>%0</title>
<g id="a_graph0"><a xlink:title="Data Model">
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-104 148,-104 148,4 -4,4"></polygon></a>
</g><!-- airports --><g id="node1" class="node"><title>airports</title>
<polygon fill="#ed7d31" stroke="transparent" points="94,-21 94,-41 140,-41 140,-21 94,-21"></polygon><text text-anchor="start" x="95.6192" y="-26.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">airports</text><polygon fill="#f9dbd2" stroke="transparent" points="94,-1 94,-21 140,-21 140,-1 94,-1"></polygon><text text-anchor="start" x="96" y="-7.4" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">faa</text><polygon fill="none" stroke="#ae5a21" points="93,0 93,-42 141,-42 141,0 93,0"></polygon></g><!-- flights --><g id="node2" class="node"><title>flights</title>
<polygon fill="#5b9bd5" stroke="transparent" points="4,-61 4,-81 50,-81 50,-61 4,-61"></polygon><text text-anchor="start" x="9.1115" y="-66.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">flights</text><polygon fill="#d6e1f1" stroke="transparent" points="4,-41 4,-61 50,-61 50,-41 4,-41"></polygon><text text-anchor="start" x="5.6115" y="-46.4" font-family="Times,serif" font-size="14.00" fill="#444444">tailnum</text><polygon fill="#d6e1f1" stroke="transparent" points="4,-21 4,-41 50,-41 50,-21 4,-21"></polygon><text text-anchor="start" x="6" y="-26.4" font-family="Times,serif" font-size="14.00" fill="#444444">origin</text><polygon fill="#d6e1f1" stroke="transparent" points="4,-1 4,-21 50,-21 50,-1 4,-1"></polygon><text text-anchor="start" x="6" y="-6.4" font-family="Times,serif" font-size="14.00" fill="#444444">dest</text><polygon fill="none" stroke="#41719c" points="3,0 3,-82 51,-82 51,0 3,0"></polygon></g><!-- flights&#45;&gt;airports --><g id="edge1" class="edge"><title>flights:origin-&gt;airports:faa</title>
<path fill="none" stroke="#555555" d="M50,-31C67.4533,-31 71.4111,-17.7969 83.8035,-12.8457"></path><polygon fill="#555555" stroke="#555555" points="84.7834,-16.2253 94,-11 83.5365,-9.3372 84.7834,-16.2253"></polygon></g><!-- flights&#45;&gt;airports --><g id="edge3" class="edge"><title>flights:dest-&gt;airports:faa</title>
<path fill="none" stroke="#555555" d="M50,-11C65.5833,-11 71.8532,-11 83.6529,-11"></path><polygon fill="#555555" stroke="#555555" points="84,-14.5001 94,-11 84,-7.5001 84,-14.5001"></polygon></g><!-- planes --><g id="node3" class="node"><title>planes</title>
<polygon fill="#70ad47" stroke="transparent" points="94,-80 94,-100 140,-100 140,-80 94,-80"></polygon><text text-anchor="start" x="99.1178" y="-85.4" font-family="Times,serif" font-size="14.00" fill="#ffffff">planes</text><polygon fill="#d9e6d4" stroke="transparent" points="94,-60 94,-80 140,-80 140,-60 94,-60"></polygon><text text-anchor="start" x="95.6115" y="-66.4" font-family="Times,serif" text-decoration="underline" font-size="14.00" fill="#444444">tailnum</text></g><!-- flights&#45;&gt;planes --><g id="edge2" class="edge"><title>flights:tailnum-&gt;planes:tailnum</title>
<path fill="none" stroke="#555555" d="M50,-51C67.307,-51 71.4751,-63.543 83.855,-68.2466"></path><polygon fill="#555555" stroke="#555555" points="83.55,-71.7457 94,-70 84.7422,-64.848 83.55,-71.7457"></polygon></g></g></svg>
</div>
<div id="joining-tables" class="section level2">
<h2 class="hasAnchor">
<a href="#joining-tables" class="anchor"></a>Joining tables</h2>
</div>
<div id="filtering-a-dm-object" class="section level2">
<h2 class="hasAnchor">
<a href="#filtering-a-dm-object" class="anchor"></a>Filtering a <code>dm</code> object</h2>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Use: <code><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">devtools::install_github("https://github.com/bergant/datamodelr")</a></code> to install it<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>The functions in this section rely heavily on related functions of {datamodelr}.<a href="#fnref2" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#class-dm">Class <code>dm</code></a></li>
      <li><a href="#ex_dm">Examples of <code>dm</code> objects</a></li>
      <li><a href="#methods-for-dm-objects">Methods for <code>dm</code> objects</a></li>
      <li><a href="#pk">Primary keys of <code>dm</code> objects</a></li>
      <li><a href="#foreign-keys">Foreign keys</a></li>
      <li><a href="#visualising-the-data-model">Visualising the data model</a></li>
      <li><a href="#joining-tables">Joining tables</a></li>
      <li><a href="#filtering-a-dm-object">Filtering a <code>dm</code> object</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Kirill Müller, Tobias Schieferdecker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
