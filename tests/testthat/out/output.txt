> dm_nycflights13(cycle = TRUE)
-- Table source ----------------------------------------------------------------
src:  <environment: R_GlobalEnv>
-- Metadata --------------------------------------------------------------------
Tables: `airlines`, `airports`, `flights`, `planes`, `weather`
Columns: 53
Primary keys: 3
Foreign keys: 4

> dm_nycflights13(cycle = TRUE) %>% dm_filter(flights, origin == "EWR")
-- Table source ----------------------------------------------------------------
src:  <environment: R_GlobalEnv>
-- Metadata --------------------------------------------------------------------
Tables: `airlines`, `airports`, `flights`, `planes`, `weather`
Columns: 53
Primary keys: 3
Foreign keys: 4
-- Filters ---------------------------------------------------------------------
flights: origin == "EWR"

> dm_nycflights13(cycle = TRUE) %>% str()
tibble [5 x 4] (S3: tbl_df/tbl/data.frame)
 $ table  : chr [1:5] "airlines" "airports" "flights" "planes" ...
 $ pks    : list<df[,1]> [1:5] 
  ..$ : tibble [1 x 1] (S3: tbl_df/tbl/data.frame)
  .. ..$ column:List of 1
  .. .. ..$ : chr "carrier"
  ..$ : tibble [1 x 1] (S3: tbl_df/tbl/data.frame)
  .. ..$ column:List of 1
  .. .. ..$ : chr "faa"
  ..$ : tibble [0 x 1] (S3: tbl_df/tbl/data.frame)
  .. ..$ column: list()
  ..$ : tibble [1 x 1] (S3: tbl_df/tbl/data.frame)
  .. ..$ column:List of 1
  .. .. ..$ : chr "tailnum"
  ..$ : tibble [0 x 1] (S3: tbl_df/tbl/data.frame)
  .. ..$ column: list()
  ..@ ptype: tibble [0 x 1] (S3: tbl_df/tbl/data.frame)
  .. ..$ column: list()
 $ fks    : list<df[,2]> [1:5] 
  ..$ : tibble [1 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ table : chr "flights"
  .. ..$ column:List of 1
  .. .. ..$ : chr "carrier"
  ..$ : tibble [2 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ table : chr [1:2] "flights" "flights"
  .. ..$ column:List of 2
  .. .. ..$ : chr "origin"
  .. .. ..$ : chr "dest"
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ table : chr(0) 
  .. ..$ column: list()
  ..$ : tibble [1 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ table : chr "flights"
  .. ..$ column:List of 1
  .. .. ..$ : chr "tailnum"
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ table : chr(0) 
  .. ..$ column: list()
  ..@ ptype: tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ table : chr(0) 
  .. ..$ column: list()
 $ filters: list<df[,2]> [1:5] 
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ filter_expr: list()
  .. ..$ zoomed     : logi(0) 
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ filter_expr: list()
  .. ..$ zoomed     : logi(0) 
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ filter_expr: list()
  .. ..$ zoomed     : logi(0) 
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ filter_expr: list()
  .. ..$ zoomed     : logi(0) 
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ filter_expr: list()
  .. ..$ zoomed     : logi(0) 
  ..@ ptype: tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ filter_expr: list()
  .. ..$ zoomed     : logi(0) 

> dm_nycflights13(cycle = TRUE) %>% dm_zoom_to(airlines) %>% str()
tibble [5 x 5] (S3: tbl_df/tbl/data.frame)
 $ zoom   : chr [1:5] "airlines" NA NA NA ...
 $ table  : chr [1:5] "airlines" "airports" "flights" "planes" ...
 $ pks    : list<df[,1]> [1:5] 
  ..$ : tibble [1 x 1] (S3: tbl_df/tbl/data.frame)
  .. ..$ column:List of 1
  .. .. ..$ : chr "carrier"
  ..$ : tibble [1 x 1] (S3: tbl_df/tbl/data.frame)
  .. ..$ column:List of 1
  .. .. ..$ : chr "faa"
  ..$ : tibble [0 x 1] (S3: tbl_df/tbl/data.frame)
  .. ..$ column: list()
  ..$ : tibble [1 x 1] (S3: tbl_df/tbl/data.frame)
  .. ..$ column:List of 1
  .. .. ..$ : chr "tailnum"
  ..$ : tibble [0 x 1] (S3: tbl_df/tbl/data.frame)
  .. ..$ column: list()
  ..@ ptype: tibble [0 x 1] (S3: tbl_df/tbl/data.frame)
  .. ..$ column: list()
 $ fks    : list<df[,2]> [1:5] 
  ..$ : tibble [1 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ table : chr "flights"
  .. ..$ column:List of 1
  .. .. ..$ : chr "carrier"
  ..$ : tibble [2 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ table : chr [1:2] "flights" "flights"
  .. ..$ column:List of 2
  .. .. ..$ : chr "origin"
  .. .. ..$ : chr "dest"
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ table : chr(0) 
  .. ..$ column: list()
  ..$ : tibble [1 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ table : chr "flights"
  .. ..$ column:List of 1
  .. .. ..$ : chr "tailnum"
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ table : chr(0) 
  .. ..$ column: list()
  ..@ ptype: tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ table : chr(0) 
  .. ..$ column: list()
 $ filters: list<df[,2]> [1:5] 
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ filter_expr: list()
  .. ..$ zoomed     : logi(0) 
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ filter_expr: list()
  .. ..$ zoomed     : logi(0) 
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ filter_expr: list()
  .. ..$ zoomed     : logi(0) 
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ filter_expr: list()
  .. ..$ zoomed     : logi(0) 
  ..$ : tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ filter_expr: list()
  .. ..$ zoomed     : logi(0) 
  ..@ ptype: tibble [0 x 2] (S3: tbl_df/tbl/data.frame)
  .. ..$ filter_expr: list()
  .. ..$ zoomed     : logi(0) 

> dm_nycflights13(cycle = TRUE) %>% dm_examine_constraints() %>% as_tibble()
# A tibble: 7 x 6
  table   kind  columns ref_table is_key problem                                
  <chr>   <chr> <keys>  <chr>     <lgl>  <chr>                                  
1 flights FK    dest    airports  FALSE  "242 entries (2.2%) of `flights$dest` ~
2 flights FK    tailnum planes    FALSE  "1640 entries (14.6%) of `flights$tail~
3 airlin~ PK    carrier <NA>      TRUE   ""                                     
4 airpor~ PK    faa     <NA>      TRUE   ""                                     
5 planes  PK    tailnum <NA>      TRUE   ""                                     
6 flights FK    carrier airlines  TRUE   ""                                     
7 flights FK    origin  airports  TRUE   ""                                     

